"use strict";(self["webpackChunkmarquiz_quiz"]=self["webpackChunkmarquiz_quiz"]||[]).push([[4357],{21324:function(e,t,n){var i=n(66278);t.A={inject:["questionId"],props:{modelValue:String,select:{type:String,default:"one"},maxlength:{type:[Number,String],default:80},placeholder:String},data(){return{isChecked:!!this.other,target:!!this.other}},computed:{...(0,i.aH)("quiz",["answers","otherAnswerAnimationId"]),other:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{checkOtherValue(e){e?this.$refs.input.focus():this.other="",this.target=e,this.isChecked=e}},watch:{answers:{handler(e){e[this.questionId]||this.isChecked||(this.target=!1)},deep:!0},otherAnswerAnimationId(e){e===this.questionId&&(this.target?(this.$refs.input.focus(),setTimeout((()=>{this.$store.commit("quiz/setOtherAnswerAnimation",!1)}),500)):this.$store.commit("quiz/setOtherAnswerAnimation",!1))}}}},32561:function(e,t,n){var i=n(39754),s=n.n(i),r=n(56449),a=n.n(r),o=n(62216),l=n.n(o);t.A={methods:{isRequiredField(e){return!!l()(e.required)||e.required},isPhoneValid(e){if(!e)return!1;const t=e.replace(/^[- +()0-9]+$/,"");return/^\d*$/.test(t)},isEmailValid(e){return!!e&&/[A-Za-zа-яА-ЯёЁ0-9._%+-]{1,}@[a-zA-Zа-яА-ЯёЁ0-9._-]{1,}([.]{1}[a-zA-Zа-яА-ЯёЁ0-9._]{2,}|[.]{1}[a-zA-Zа-яА-ЯёЁ0-9]{2,}[.]{1}[a-zA-Zа-яА-ЯёЁ0-9]{2,})/.test(e)},blurCheckbox(e){if(l()(this.$refs[e]))return!1;a()(this.$refs[e])?s()(this.$refs[e],(e=>{e.$el.children[0].blur()})):this.$refs[e].$el.children[0].blur()}}}},98565:function(e,t,n){n.d(t,{A:function(){return h}});var i=n(20641),s=n(53751);function r(e,t,n,r,a,o){return n.isGroup?((0,i.uX)(),(0,i.Wv)(s.F,{key:a.activated,appear:"",css:!1,tag:"div",onBeforeEnter:o.beforeEnter,onEnter:o.enter,onAfterEnter:o.afterEnter},{default:(0,i.k6)((()=>[(0,i.RG)(e.$slots,"default")])),_:3},8,["onBeforeEnter","onEnter","onAfterEnter"])):((0,i.uX)(),(0,i.Wv)(s.eB,{key:a.activated,mode:"out-in",appear:"",css:!1,onBeforeEnter:o.beforeEnter,onEnter:o.enter,onAfterEnter:o.afterEnter},{default:(0,i.k6)((()=>[(0,i.RG)(e.$slots,"default")])),_:3},8,["onBeforeEnter","onEnter","onAfterEnter"]))}var a=n(66278),o=n(31304),l={activated(){this.activated=!this.activated},props:{isGroup:{type:Boolean,default:!1},offsetX:{type:String,default:"1.25rem"},offsetY:{type:String,default:"1rem"},duration:{type:Number,default:170},acceleration:{type:Number,default:30}},data(){return{activated:!1}},computed:{...(0,a.L8)("quiz",["animationStyle"]),translateCoords(){switch(this.animationStyle){case"bottomTop":return`translate3d(0, ${this.offsetY}, 0)`;case"fade":return`translate3d(0, ${this.offsetY}, 0)`;default:return`translate3d(${this.offsetX}, 0, 0)`}}},methods:{timeout(e){return new Promise((t=>{setTimeout(t,e)}))},beforeEnter(e){e.style.transition=`opacity ${this.duration}ms ease-in-out, transform ${this.duration}ms ease-in-out`,this.animationStyle!==o.gv.animation.FADE&&(e.style.transform=this.translateCoords),e.style.opacity="0"},async enter(e,t){const n=Number(e.dataset.elementIndex)?this.duration+Number(e.dataset.elementIndex)*this.acceleration:this.duration;await this.timeout(n),this.animationStyle!==o.gv.animation.FADE&&(e.style.transform="translate3d(0, 0, 0)"),e.style.opacity="1",t()},async afterEnter(e){const t=Number(e.dataset.elementIndex)?this.duration+Number(e.dataset.elementIndex)*this.acceleration:this.duration;await this.timeout(t),e.style.transition="",e.style.transform="",e.style.opacity=""}}},u=n(66262);const d=(0,u.A)(l,[["render",r]]);var h=d},4357:function(e,t,n){n.d(t,{A:function(){return ee}});var i=n(20641),s=n(90033),r=n(53751);const a=["data-element-index"],o=["data-element-index"],l={key:"variants__image",class:"answer-variants__image"},u=["src"],d={key:0,class:"answer-variants__image-loading"};function h(e,t,n,h,c,m){const f=(0,i.g2)("Answer"),g=(0,i.g2)("b-radio"),p=(0,i.g2)("b-checkbox"),v=(0,i.g2)("OtherInput"),w=(0,i.g2)("SlideAnimation");return(0,i.uX)(),(0,i.CE)("div",{ref:"answers",class:(0,s.C4)(["answer-variants",{"answer-variants_has_image":!!m.imageUrl,"answer-variants_long":m.isLong}])},[(0,i.bF)(w,{class:"answer-variants__group",isGroup:!0},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(m.answers,((e,n)=>((0,i.uX)(),(0,i.CE)("div",{ref_for:!0,ref:"answer",key:e.id,class:(0,s.C4)(["answer-variants__variant",m.getVariantClasses(e)]),"data-element-index":n},["one"===m.select?((0,i.uX)(),(0,i.Wv)(g,{key:0,modelValue:m.val,"onUpdate:modelValue":t[0]||(t[0]=e=>m.val=e),nativeValue:e.id},{default:(0,i.k6)((()=>[(0,i.bF)(f,{answer:e,isLong:m.isLong},null,8,["answer","isLong"])])),_:2},1032,["modelValue","nativeValue"])):"many"===m.select?((0,i.uX)(),(0,i.Wv)(p,{key:1,ref_for:!0,ref:"checkbox",modelValue:m.val,"onUpdate:modelValue":t[1]||(t[1]=e=>m.val=e),nativeValue:e.id},{default:(0,i.k6)((()=>[(0,i.bF)(f,{answer:e,isLong:m.isLong},null,8,["answer","isLong"])])),_:2},1032,["modelValue","nativeValue"])):(0,i.Q3)("",!0)],10,a)))),128)),m.hasOther?((0,i.uX)(),(0,i.CE)("div",{key:"other",class:(0,s.C4)(["answer-variants__variant answer-variants__other",{"answer-variants__item_selected":c.other,"answer_verifying-end":e.isVerifyingEnd}]),"data-element-index":m.answers.length},[(0,i.bF)(v,{modelValue:c.other,"onUpdate:modelValue":t[2]||(t[2]=e=>c.other=e),select:m.select,placeholder:m.otherPlaceholder},null,8,["modelValue","select","placeholder"])],10,o)):(0,i.Q3)("",!0)])),_:1}),(0,i.bF)(w,{offsetX:"0"},{default:(0,i.k6)((()=>[m.imageUrl?((0,i.uX)(),(0,i.CE)("div",l,[(0,i.bo)((0,i.Lk)("img",{ref:"img",class:"answer-variants__image-img",src:m.imageUrl,alt:"Answer image",onLoad:t[3]||(t[3]=e=>c.imgLoaded=!0)},null,40,u),[[r.aG,c.imgLoaded]]),m.imageUrl&&!c.imgLoaded?((0,i.uX)(),(0,i.CE)("div",d)):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)])),_:1})],2)}var c=n(87612),m=n.n(c),f=n(79859),g=n.n(f),p=n(76135),v=n.n(p),w=n(56449),y=n.n(w),V=n(55378),_=n.n(V),b=n(62193),k=n.n(b),A=n(23805),E=n.n(A),C=n(58156),$=n.n(C),q=(n(44114),n(31304)),L=n(32561),x=n(98565);const X=["innerHTML"],I={key:2,class:"answer__text"};function z(e,t,n,r,a,o){const l=(0,i.g2)("Hint");return(0,i.uX)(),(0,i.CE)("div",{class:(0,s.C4)([{answer_long:o.isLongAnswer},"answer"])},[n.answer.title?((0,i.uX)(),(0,i.CE)("span",{key:0,class:"answer__title",innerHTML:n.answer.title},null,8,X)):(0,i.Q3)("",!0),n.answer.hint?((0,i.uX)(),(0,i.Wv)(l,{key:1,hint:n.answer.hint,class:"answer__hint"},null,8,["hint"])):(0,i.Q3)("",!0),o.isLongAnswer?((0,i.uX)(),(0,i.CE)("p",I,(0,s.v_)(n.answer.longText)+"  ",1)):(0,i.Q3)("",!0)],2)}var O={components:{Hint:(0,i.$V)((()=>n.e(5822).then(n.bind(n,67414))))},props:{answer:Object,isLong:Boolean},computed:{isLongAnswer(){return this.isLong&&!!this.answer.longText}}},S=n(66262);const F=(0,S.A)(O,[["render",z]]);var U=F;function Q(e,t,n,r,a,o){const l=(0,i.g2)("b-radio"),u=(0,i.g2)("b-checkbox"),d=(0,i.g2)("b-input"),h=(0,i.g2)("b-field");return(0,i.uX)(),(0,i.CE)("div",{class:(0,s.C4)(["other-input",{"other-input_animation":!e.other&&e.otherAnswerAnimationId===e.questionId&&"emoji"!==e.currentQuestion?.type,"other-input_native":"emoji"!==e.currentQuestion?.type}])},["one"===e.select?((0,i.uX)(),(0,i.Wv)(l,{key:0,modelValue:!!e.other,nativeValue:!0,checked:!!e.other,"onUpdate:modelValue":e.checkOtherValue},null,8,["modelValue","checked","onUpdate:modelValue"])):"many"===e.select?((0,i.uX)(),(0,i.Wv)(u,{key:1,modelValue:!!e.other,checked:!!e.other,"onUpdate:modelValue":e.checkOtherValue},null,8,["modelValue","checked","onUpdate:modelValue"])):(0,i.Q3)("",!0),(0,i.bF)(h,null,{default:(0,i.k6)((()=>[(0,i.bF)(d,{ref:"input",modelValue:e.other,"onUpdate:modelValue":t[0]||(t[0]=t=>e.other=t),maxlength:e.maxlength,placeholder:e.placeholder||`${e.$t("Other")}...`,onFocus:t[1]||(t[1]=t=>{e.target=!0,e.$emit("focus")}),onBlur:t[2]||(t[2]=t=>e.$emit("blur"))},null,8,["modelValue","maxlength","placeholder"])])),_:1})],2)}var B=n(21324),T=n(66278),N={name:"OtherInput",mixins:[B.A],computed:{...(0,T.L8)("quiz",["currentQuestion"])}};const P=(0,S.A)(N,[["render",Q]]);var W=P,j=n(69843),G=n.n(j),D=n(47091),H=n.n(D),M=n(81162),Z={props:{question:Object},data(){return{isVerifyingEnd:!1,isVerified:!1,isDelayPassed:!1}},computed:{...(0,T.L8)("quiz",["isVerifyingEnabled","allCorrectAnswers","points"]),isMany(){return"many"===$()(this.question,"select")},hasCorrectAnswer(){const e=$()(this.allCorrectAnswers,this.question.id);return Boolean(y()(e)?H()(e)>0:e)}},methods:{getVerifyingState(e){if(!this.isVerifyingEnabled)return[];if(!this.hasCorrectAnswer||k()(this.ids)&&G()(this.id))return[];const t=[],n=(0,M.Vk)(this.points,this.question.id,e);return(this.isMany?g()(this.ids,e):this.id===e)&&(n>0?(this.isMany||(this.isVerifyingEnd=!0),this.isVerified=!0,t.push("answer_verifying-correct")):(setTimeout((()=>{this.isDelayPassed=!0}),400),this.isVerifyingEnd=!0,this.isVerified=!1,t.push("answer_verifying-wrong"))),this.isVerifyingEnd&&t.push("answer_verifying-end"),this.isDelayPassed&&n>0&&t.push("answer_verifying-correct"),t}}};const R=Z;var Y=R,K={extends:Y,mixins:[L.A],components:{Answer:U,OtherInput:W,SlideAnimation:x.A},async mounted(){await this.$nextTick(),this.initValue(this.modelValue)},props:{modelValue:[String,Array],question:Object},data(){return{id:null,ids:[],other:null,imgLoaded:!1}},computed:{val:{get(){return"one"===this.select?this.id:this.ids},set(e){"one"===this.select?this.id=e:this.ids=e}},answers(){return $()(this.question,"answers",[])},select(){return $()(this.question,"select","one")},hasOther(){const e=$()(this.question,"other");return E()(e)?$()(e,"enabled",!1):!!e},otherPlaceholder(){return $()(this.question,"other.placeholder","")},imageUrl(){const e=$()(this.question,"options.variantsImage",{});return k()(e)||this.isLong?null:this.$image.url(e,q.gv.imageOptions.questions.variants)},isLong(){return $()(this.question,"options.isLong",!1)}},methods:{initValue(e){if(k()(e))return;const t=_()(this.answers,(e=>e.id));y()(e)?v()(e,(e=>{g()(t,e)?this.ids.push(e):this.other=e})):g()(t,e)?this.id=e:this.other=e},isChecked(e){switch(this.select){case"one":return this.id===e;case"many":return g()(this.ids,e);default:return!1}},getVariantClasses(e){return[{"answer-variants__variant_has-hint":!!e.hint,"answer-variants__variant_selected":this.isChecked(e.id)},this.getVerifyingState(e.id)]}},watch:{id(e){e&&(this.other&&(this.other=null),this.$emit("update:modelValue",e))},ids:{handler(e){this.blurCheckbox("checkbox"),this.$emit("update:modelValue",m()([...e,this.other],(e=>!!e)))},deep:!0},other(e){switch(this.select){case"one":if(this.id&&e&&(this.id=null),this.id&&!e)return;this.$emit("update:modelValue",e);break;case"many":e?this.$emit("update:modelValue",[...this.ids,e]):this.$emit("update:modelValue",this.ids);break;default:break}}}};const J=(0,S.A)(K,[["render",h]]);var ee=J}}]);